<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MonoPrint</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header>
  <h1>MonoPrint</h1>
  <nav>
    <a href="#intro">ì†Œê°œ</a>
    <a href="#products">ì œí’ˆ</a>
    <a href="#contact">ë¬¸ì˜</a>
  </nav>
  <button id="cart-btn">ğŸ›’ ì¥ë°”êµ¬ë‹ˆ (<span id="cart-count">0</span>)</button>
</header>

<section id="intro">
  <h2>ì†Œê°œ</h2>
  <p>
    MonoPrintëŠ” ë¯¸ë‹ˆë©€í•œ ë””ìì¸ê³¼ ê°ê°ì ì¸ í”„ë¦°íŒ… í‹°ì…”ì¸ ë¥¼ ì„ ë³´ì´ëŠ” ë¸Œëœë“œì…ë‹ˆë‹¤.<br>
    í¸ì•ˆí•˜ê²Œ ì…ì„ ìˆ˜ ìˆëŠ” ì¼ìƒ í‹°ì…”ì¸ ë¶€í„° ê°ê°ì ì¸ í”„ë¦°íŒ… ë””ìì¸ê¹Œì§€,<br>
    ìš°ë¦¬ì˜ ì¼ìƒì„ ì¡°ê¸ˆ ë” íŠ¹ë³„í•˜ê²Œ ë§Œë“¤ì–´ë“œë¦½ë‹ˆë‹¤.
  </p>
</section>

<section id="products">
  <h2>ì œí’ˆ</h2>
  <div class="products">
    <!-- JSì—ì„œ ìƒí’ˆ ìƒì„± -->
  </div>
</section>

<section id="contact">
  <h2>ë¬¸ì˜</h2>
  <p>ì´ë©”ì¼: eunhugim600@gmail.com</p>
</section>

<!-- ì¥ë°”êµ¬ë‹ˆ ëª¨ë‹¬ -->
<div id="cart-modal" class="cart-modal">
  <div class="cart-content">
    <span id="cart-close">&times;</span>
    <h3>ğŸ›’ ì¥ë°”êµ¬ë‹ˆ</h3>
    <ul id="cart-items"></ul>
    <p id="cart-total" style="margin-top:15px; font-weight:bold;">ì´í•©: â‚©0</p>
  </div>
</div>

<script>
let cart = [];

// ----- 1ï¸âƒ£ í˜ì´ì§€ ë¡œë“œ ì‹œ localStorageì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸° -----
const savedCart = localStorage.getItem('cart');
if(savedCart){
  cart = JSON.parse(savedCart);
}

// ----- 2ï¸âƒ£ ìƒí’ˆ ë°ì´í„° -----
const productsContainer = document.querySelector('.products');
const productsData = [
  { name: "ì‚¬ë‘í•´í‹°ì…”ì¸ ", price: 39000, img: "images/ì‚¬ë‘í•´-T-shirt.jpg" },
  { name: "ì¢‹ì•„í•´í‹°ì…”ì¸ ", price: 39000, img: "images/suki-T-shirt.jpg.png" },
  { name: "ì§‘ì¤‘í•˜ë‹¤ í‹°ì…”ì¸ ", price: 39000, img: "images/ì§‘ì¤‘í•˜ë‹¤-T-Shirt.jpg" },
  { name: "ê´œì°®ì•„ í‹°ì…”ì¸ ", price: 39000, img: "images/ê´œì°®ì•„-T-shirt.jpg" }
];

// ----- 3ï¸âƒ£ ìƒí’ˆ ì¶”ê°€ í•¨ìˆ˜ -----
function addProductToPage(product){
  const div = document.createElement('div');
  div.className = 'product';
  div.innerHTML = `
    <img src="${product.img}" alt="${product.name}">
    <h3>${product.name}</h3>
    <p class="price">â‚©${product.price.toLocaleString()}</p>
    <button class="add-cart-btn" data-name="${product.name}" data-price="${product.price}">ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>
  `;
  productsContainer.appendChild(div);

  div.querySelector('.add-cart-btn').addEventListener('click', () => {
    const existing = cart.find(i => i.name === product.name);
    if(existing) existing.quantity +=1;
    else cart.push({name: product.name, price: product.price, quantity:1});
    updateCartCount();
    saveCart(); // âœ… localStorage ì €ì¥
  });
}

productsData.forEach(addProductToPage);

// ----- 4ï¸âƒ£ ì¥ë°”êµ¬ë‹ˆ ê´€ë ¨ -----
const cartCount = document.getElementById('cart-count');
const cartBtn = document.getElementById('cart-btn');
const cartModal = document.getElementById('cart-modal');
const cartItems = document.getElementById('cart-items');
const cartClose = document.getElementById('cart-close');
const cartTotal = document.getElementById('cart-total');

function updateCartCount(){
  const total = cart.reduce((sum, item) => sum + item.quantity, 0);
  cartCount.textContent = total;
}

function saveCart(){
  localStorage.setItem('cart', JSON.stringify(cart));
}

function renderCart(){
  cartItems.innerHTML = '';
  if(cart.length === 0){
    cartItems.innerHTML = '<li>ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.</li>';
    cartTotal.textContent = "ì´í•©: â‚©0";
    return;
  }

  let totalSum = 0;
  cart.forEach((item, idx) => {
    totalSum += item.price * item.quantity;
    const li = document.createElement('li');
    li.innerHTML = `
      ${idx+1}. ${item.name} - â‚©${item.price.toLocaleString()} x ${item.quantity} = â‚©${(item.price*item.quantity).toLocaleString()}
      <span class="cart-item-controls">
        <button class="minus">-</button>
        <button class="plus">+</button>
        <button class="remove">ì‚­ì œ</button>
      </span>
    `;
    cartItems.appendChild(li);

    li.querySelector('.minus').addEventListener('click', () => {
      if(item.quantity > 1) item.quantity--;
      else cart = cart.filter(i => i !== item);
      updateCartCount();
      renderCart();
      saveCart(); // âœ… ì €ì¥
    });
    li.querySelector('.plus').addEventListener('click', () => {
      item.quantity++;
      updateCartCount();
      renderCart();
      saveCart(); // âœ… ì €ì¥
    });
    li.querySelector('.remove').addEventListener('click', () => {
      cart = cart.filter(i => i !== item);
      updateCartCount();
      renderCart();
      saveCart(); // âœ… ì €ì¥
    });
  });

  cartTotal.textContent = `ì´í•©: â‚©${totalSum.toLocaleString()}`;
}

// ----- 5ï¸âƒ£ ì¥ë°”êµ¬ë‹ˆ ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸° -----
cartBtn.addEventListener('click', () => {
  renderCart();
  cartModal.style.display = 'flex';
});

cartClose.addEventListener('click', () => cartModal.style.display='none');
cartModal.addEventListener('click', e => { if(e.target === cartModal) cartModal.style.display='none'; });

// ----- 6ï¸âƒ£ ê²°ì œí•˜ê¸° ë²„íŠ¼ (ì˜¤í”ˆì¹´í†¡ ì´ë™) -----
const checkoutBtn = document.createElement('button');
checkoutBtn.textContent = 'ê²°ì œí•˜ê¸°';
checkoutBtn.style.marginTop = '15px';
checkoutBtn.style.padding = '8px 12px';
checkoutBtn.style.cursor = 'pointer';
checkoutBtn.style.background = '#ff5722';
checkoutBtn.style.color = 'white';
checkoutBtn.style.border = 'none';
checkoutBtn.style.fontWeight = 'bold';
checkoutBtn.style.borderRadius = '4px';
checkoutBtn.addEventListener('mouseover', ()=> checkoutBtn.style.background='#e64a19');
checkoutBtn.addEventListener('mouseout', ()=> checkoutBtn.style.background='#ff5722');

cartModal.querySelector('.cart-content').appendChild(checkoutBtn);

checkoutBtn.addEventListener('click', () => {
  if(cart.length === 0){
    alert('ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤.');
    return;
  }
  // ì´í•© ê³„ì‚°
  const total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
  alert(`ê²°ì œë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.\nì´ì•¡: â‚©${total.toLocaleString()}`);

  // ì˜¤í”ˆì¹´í†¡ ë§í¬ ì—´ê¸° (ìì‹  ë§í¬ë¡œ ë³€ê²½)
  const kakaoLink = 'https://open.kakao.com/o/s3PbL79h';
  window.open(kakaoLink, '_blank');
});

// ----- 7ï¸âƒ£ í˜ì´ì§€ ë¡œë“œ ì‹œ ì¥ë°”êµ¬ë‹ˆ ìˆ«ì í‘œì‹œ -----
updateCartCount();

</script>

</body>
</html>
